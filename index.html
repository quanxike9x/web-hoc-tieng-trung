<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8"/>
  <title>HSK Trainer Web Full v3</title>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <style>
    body { font-family: 'Arial Unicode MS', sans-serif; background: #f5f5f5; padding: 20px; margin: 0; }
    header { background: #4a6fa5; color: white; padding: 1em; text-align: center; font-size: 1.5em; }
    .container { max-width: 800px; margin: auto; }
    .hanzi { font-size: 60px; font-family: 'SimSun'; text-align: center; margin: 20px 0; }
    input[type="text"] { font-size: 1.1em; padding: 10px; width: 100%; box-sizing: border-box; }
    .btn { padding: 10px 15px; margin: 8px 4px; border: none; border-radius: 5px; font-size: 1em; cursor: pointer; }
    .accent { background-color: #4a6fa5; color: white; }
    .success { background-color: #28a745; color: white; }
    .danger { background-color: #dc3545; color: white; }
    .secondary { background-color: #6c757d; color: white; }
    #result { font-weight: bold; margin-top: 10px; }
    canvas { display: none; border: 1px solid #ccc; margin-top: 20px; touch-action: none; }
    #canvas-controls { display: none; margin-top: 10px; }
    #wrong-table { display: none; background: white; padding: 15px; border-radius: 10px; margin-top: 15px; border: 1px solid #ccc; }
    #wrong-table h3 { margin-top: 0; color: #dc3545; }
    #wrong-table p { margin: 4px 0; }
    #status { margin-top: 10px; font-style: italic; color: #6c757d; }
  </style>

  <!-- CSS cho popup Luyá»‡n viáº¿t (grid lines + container cho HanziWriter) -->
  <style>
    #character-target-div {
      position: relative;
      width: 300px;
      height: 300px;
      margin: auto;
      background: white;
      border-radius: 6px;
      border: 1px solid #ccc;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
      overflow: hidden;
    }
    #grid-canvas {
      position: absolute;
      top: 0; left: 0;
      width: 300px;
      height: 300px;
      z-index: 0;
      pointer-events: none;
    }
    .grid-line {
      position: absolute;
      background: rgba(0,0,0,0.1);
    }
    .grid-line.vertical {
      width: 1px;
      height: 100%;
      left: 50%;
      top: 0;
    }
    .grid-line.horizontal {
      height: 1px;
      width: 100%;
      top: 50%;
      left: 0;
    }
    .grid-line.diagonal1 {
      width: 1px;
      height: 141%;
      transform: rotate(45deg);
      left: 50%;
      top: -20%;
    }
    .grid-line.diagonal2 {
      width: 1px;
      height: 141%;
      transform: rotate(-45deg);
      left: 50%;
      top: -20%;
    }
    /* Container riÃªng cho HanziWriter, khÃ´ng bá»‹ xÃ³a khi reset */
    #writer-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 300px;
      height: 300px;
      z-index: 2;
    }
  </style>
</head>
<body>
  <header>æ±‰è¯­æ°´å¹³ HSK Trainer IndexDb_Grammar</header>
  <div class="container">
    <input accept=".txt" id="file-input" type="file"/>
    <div id="file-name">ChÆ°a chá»n file</div>
    <div id="status">Äang táº£i dá»¯ liá»‡u...</div>
    <div class="hanzi" id="hanzi-display">ChÆ°a cÃ³ tá»«</div>
    <input id="answer" placeholder="Nháº­p nghÄ©a hoáº·c HÃ¡n tá»±..." type="text"/>
    <div>
      <button class="btn success" onclick="checkAnswer()">Kiá»ƒm tra</button>
      <button class="btn danger" onclick="skipWord()">Bá» qua</button>
      <button class="btn secondary" onclick="toggleInputMode()">Äá»•i cháº¿ Ä‘á»™</button>
      <button class="btn accent" onclick="showHelp()">HÆ°á»›ng dáº«n</button>
      <button class="btn secondary" onclick="toggleNoTone()">Báº­t/Táº¯t khÃ´ng dáº¥u</button>
      <button class="btn accent" onclick="startPomodoro()">Pomodoro</button>
      <button class="btn secondary" onclick="openWritingPopup()">Luyá»‡n viáº¿t</button>
      <button class="btn accent" onclick="lookupHanzi()">Tra Hanzii</button>
      <button class="btn accent" onclick="openGrammarGame()">Ngá»¯ phÃ¡p cáº£m nháº­n</button>
    </div>
    <div id="result"></div>
    <div id="pomodoro-timer" style="margin-top: 20px; font-size: 1.5em; display: none;">
      â³ Thá»i gian cÃ²n láº¡i: <span id="time-display">25:00</span>
    </div>
    <canvas height="400" id="writing-canvas" width="400"></canvas>
    <div id="canvas-controls">
      <label>Äá»™ dÃ y bÃºt: <input id="pen-size" max="15" min="1" type="range" value="5"/></label>
      <button class="btn secondary" onclick="clearCanvas()">XÃ³a</button>
    </div>
    <div id="wrong-table">
      <h3>Sai rá»“i hehe!</h3>
      <p><strong>Chá»¯ HÃ¡n:</strong> <span id="wt-hanzi"></span></p>
      <p><strong>Pinyin:</strong> <span id="wt-pinyin"></span></p>
      <p><strong>NghÄ©a:</strong> <span id="wt-meanings"></span></p>
      <p><strong>Báº¡n nháº­p:</strong> <span id="wt-userinput"></span></p>
    </div>
    <script>
      // Biáº¿n toÃ n cá»¥c
      let words = [], currentWord = null, inputMode = "hanzi", noTone = false;
      let canvas = null, ctx = null, penSize = 5, drawing = false;
      let pomoInterval = null;
      let db = null;

      // Khá»Ÿi táº¡o IndexedDB
      function initDB() {
        return new Promise((resolve, reject) => {
          const request = indexedDB.open("HSKTrainerDB", 1);
          
          request.onerror = (event) => {
            console.error("Database error:", event.target.error);
            reject("Database error");
          };
          
          request.onupgradeneeded = (event) => {
            const db = event.target.result;
            if (!db.objectStoreNames.contains('state')) {
              db.createObjectStore('state', { keyPath: 'id' });
            }
          };
          
          request.onsuccess = (event) => {
            db = event.target.result;
            resolve(db);
          };
        });
      }

      // LÆ°u tráº¡ng thÃ¡i vÃ o IndexedDB
      function saveState() {
        if (!db) return;
        
        const transaction = db.transaction(['state'], 'readwrite');
        const store = transaction.objectStore('state');
        
        const state = {
          id: 1,
          words: words,
          currentWord: currentWord,
          inputMode: inputMode,
          noTone: noTone,
          penSize: penSize,
          fileName: document.getElementById("file-name").textContent
        };
        
        store.put(state);
      }

      // Táº£i tráº¡ng thÃ¡i tá»« IndexedDB
      function loadState() {
        return new Promise((resolve, reject) => {
          if (!db) {
            reject("Database not initialized");
            return;
          }
          
          const transaction = db.transaction(['state'], 'readonly');
          const store = transaction.objectStore('state');
          const request = store.get(1);
          
          request.onerror = (event) => {
            reject("Error loading state");
          };
          
          request.onsuccess = (event) => {
            const state = request.result;
            if (state) {
              words = state.words || [];
              currentWord = state.currentWord || null;
              inputMode = state.inputMode || "hanzi";
              noTone = state.noTone || false;
              penSize = state.penSize || 5;
              document.getElementById("file-name").textContent = state.fileName || "ChÆ°a chá»n file";
              document.getElementById("pen-size").value = penSize;
              
              if (words.length > 0 && currentWord) {
                updateWordDisplay();
                document.getElementById("status").textContent = `ÄÃ£ táº£i ${words.length} tá»« | Cháº¿ Ä‘á»™: ${inputMode === "hanzi" ? "Nháº­p nghÄ©a" : "Nháº­p HÃ¡n tá»±"}`;
              }
            }
            resolve();
          };
        });
      }

      // Khá»Ÿi táº¡o á»©ng dá»¥ng
      async function initApp() {
        try {
          await initDB();
          await loadState();
          document.getElementById("status").textContent = words.length > 0 
            ? `ÄÃ£ táº£i ${words.length} tá»« | Cháº¿ Ä‘á»™: ${inputMode === "hanzi" ? "Nháº­p nghÄ©a" : "Nháº­p HÃ¡n tá»±"}`
            : "ChÆ°a cÃ³ dá»¯ liá»‡u. Vui lÃ²ng táº£i file tá»« vá»±ng.";
          
          setupCanvas();
          setupEventListeners();
        } catch (error) {
          console.error("Initialization error:", error);
          document.getElementById("status").textContent = "Lá»—i khi táº£i dá»¯ liá»‡u. LÃ m má»›i trang Ä‘á»ƒ thá»­ láº¡i.";
        }
      }

      // Thiáº¿t láº­p canvas
      function setupCanvas() {
        canvas = document.getElementById("writing-canvas");
        ctx = canvas.getContext("2d");
        document.getElementById("pen-size").addEventListener("input", function(e) {
          penSize = parseInt(e.target.value);
          saveState();
        });
        
        // Sá»± kiá»‡n chuá»™t
        canvas.addEventListener("mousedown", e => { 
          drawing = true; 
          ctx.beginPath(); 
          ctx.moveTo(e.offsetX, e.offsetY); 
        });
        
        canvas.addEventListener("mousemove", e => {
          if (drawing) {
            ctx.lineTo(e.offsetX, e.offsetY);
            ctx.strokeStyle = "#000";
            ctx.lineWidth = penSize;
            ctx.stroke();
          }
        });
        
        canvas.addEventListener("mouseup", () => drawing = false);
        canvas.addEventListener("mouseleave", () => drawing = false);

        // Sá»± kiá»‡n cáº£m á»©ng
        canvas.addEventListener("touchstart", function(e) {
          e.preventDefault();
          const touch = e.touches[0];
          const rect = canvas.getBoundingClientRect();
          drawing = true;
          ctx.beginPath();
          ctx.moveTo(touch.clientX - rect.left, touch.clientY - rect.top);
        });
        
        canvas.addEventListener("touchmove", function(e) {
          e.preventDefault();
          if (!drawing) return;
          const touch = e.touches[0];
          const rect = canvas.getBoundingClientRect();
          ctx.lineTo(touch.clientX - rect.left, touch.clientY - rect.top);
          ctx.strokeStyle = "#000";
          ctx.lineWidth = penSize;
          ctx.stroke();
        });
        
        canvas.addEventListener("touchend", () => drawing = false);
      }

      // Thiáº¿t láº­p event listeners
      function setupEventListeners() {
        document.getElementById("file-input").addEventListener("change", function(e) {
          const file = e.target.files[0];
          if (!file) return;
          document.getElementById("file-name").textContent = file.name;
          const reader = new FileReader();
          reader.onload = function(event) {
            const lines = event.target.result.split("\n");
            words = lines.map(line => {
              const parts = line.trim().split(/\t+|\s{2,}/);
              return parts.length >= 3 ? [parts[0], parts[1], parts.slice(2).join(' ').split(/[,/]/).map(s => s.trim())] : null;
            }).filter(Boolean);
            loadNewWord();
            saveState();
            document.getElementById("status").textContent = `ÄÃ£ táº£i ${words.length} tá»« | Cháº¿ Ä‘á»™: ${inputMode === "hanzi" ? "Nháº­p nghÄ©a" : "Nháº­p HÃ¡n tá»±"}`;
          };
          reader.readAsText(file);
        });
        
        document.getElementById("answer").addEventListener("keydown", function(e) {
          if (e.key === "Enter") checkAnswer();
        });
      }

      // CÃ¡c hÃ m chá»©c nÄƒng chÃ­nh
      function loadNewWord() {
        if (!words.length) return;
        currentWord = words[Math.floor(Math.random() * words.length)];
        updateWordDisplay();
        saveState();
      }

      function updateWordDisplay() {
        document.getElementById("hanzi-display").textContent = inputMode === "hanzi" ? currentWord[0] : currentWord[2][0];
        document.getElementById("answer").value = "";
        document.getElementById("result").textContent = "";
        document.getElementById("wrong-table").style.display = "none";
      }

      function normalize(str) {
        return str.normalize("NFD").replace(/\p{Diacritic}/gu, "").replace(/Ä‘/g, "d").toLowerCase();
      }

      function checkAnswer() {
        const input = document.getElementById("answer").value.trim();
        if (!input || !currentWord) return;
        let correct = false;
        
        if (inputMode === "hanzi") {
          const clean = noTone ? normalize(input) : input.toLowerCase();
          correct = currentWord[2].some(m => (noTone ? normalize(m) : m.toLowerCase()) === clean);
        } else {
          correct = currentWord[0] === input;
        }
        
        if (correct) {
          document.getElementById("result").textContent = "âœ… ÄÃºng rá»“i!";
          document.getElementById("wrong-table").style.display = "none";
          setTimeout(loadNewWord, 1000);
          saveState();
        } else {
          document.getElementById("result").textContent = "âŒ Sai rá»“i!";
          document.getElementById("wt-hanzi").textContent = currentWord[0];
          document.getElementById("wt-pinyin").textContent = currentWord[1];
          document.getElementById("wt-meanings").textContent = currentWord[2].join(", ");
          document.getElementById("wt-userinput").textContent = input;
          document.getElementById("wrong-table").style.display = "block";
        }
      }

      function skipWord() { 
        loadNewWord(); 
        saveState();
      }

      function toggleInputMode() {
        inputMode = inputMode === "hanzi" ? "meaning" : "hanzi";
        updateWordDisplay();
        saveState();
        document.getElementById("status").textContent = `ÄÃ£ táº£i ${words.length} tá»« | Cháº¿ Ä‘á»™: ${inputMode === "hanzi" ? "Nháº­p nghÄ©a" : "Nháº­p HÃ¡n tá»±"}`;
      }

      function toggleNoTone() { 
        noTone = !noTone; 
        alert(noTone ? "ÄÃ£ báº­t khÃ´ng dáº¥u" : "ÄÃ£ táº¯t khÃ´ng dáº¥u"); 
        saveState();
      }

      function showHelp() {
        alert(`HÆ°á»›ng dáº«n sá»­ dá»¥ng:
1. Táº£i file .txt vá»›i Ä‘á»‹nh dáº¡ng: 
   HÃ¡n tá»±[TAB]Pinyin[TAB]NghÄ©a 1, NghÄ©a 2
   VÃ­ dá»¥:
   ä½ å¥½\tnÇ hÇo\txin chÃ o, chÃ o báº¡n

2. Nháº­p nghÄ©a hoáº·c chá»¯ HÃ¡n tÆ°Æ¡ng á»©ng vá»›i cháº¿ Ä‘á»™ hiá»‡n táº¡i

3. TÃ­nh nÄƒng:
   - Pomodoro: Háº¹n giá» há»c táº­p 25 phÃºt
   - Luyá»‡n viáº¿t: Táº­p viáº¿t chá»¯ HÃ¡n
   - Tra Hanzii: Má»Ÿ tra tá»« trÃªn hanzii.net
   # Created by: @Quanxike9x

ğŸ†˜ Trá»£ giÃºp: Náº¿u gáº·p váº¥n Ä‘á» xin vui lÃ²ng liÃªn há»‡ Zalo: 0968645112`);
      }

      function startPomodoro() {
        let duration = 25 * 60; // 25 phÃºt tÃ­nh báº±ng giÃ¢y
        const timerDiv = document.getElementById("pomodoro-timer");
        const display = document.getElementById("time-display");

        if (pomoInterval) clearInterval(pomoInterval);

        timerDiv.style.display = "block";

        function updateTimer() {
          const minutes = String(Math.floor(duration / 60)).padStart(2, '0');
          const seconds = String(duration % 60).padStart(2, '0');
          display.textContent = `${minutes}:${seconds}`;
          if (duration === 0) {
            clearInterval(pomoInterval);
            alert("â° Háº¿t giá»! Nghá»‰ ngÆ¡i 5 phÃºt nhÃ©!");
            timerDiv.style.display = "none";
          }
          duration--;
        }

        updateTimer();
        pomoInterval = setInterval(updateTimer, 1000);
      }

      function lookupHanzi() {
        if (!currentWord) return;
        const url = "https://hanzii.net/search/word/" + currentWord[0] + "?hl=vi";
        window.open(url, "_blank");
      }

      function toggleCanvas() {
        const show = canvas.style.display === "none";
        canvas.style.display = document.getElementById("canvas-controls").style.display = show ? "block" : "none";
        if (show) drawGrid();
      }

      function clearCanvas() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        drawGrid();
      }

      function drawGrid() {
        ctx.strokeStyle = "#ddd";
        ctx.lineWidth = 1;
        ctx.beginPath();
        ctx.moveTo(0, 200); ctx.lineTo(400, 200);
        ctx.moveTo(200, 0); ctx.lineTo(200, 400);
        ctx.moveTo(0, 0); ctx.lineTo(400, 400);
        ctx.moveTo(400, 0); ctx.lineTo(0, 400);
        ctx.stroke();
      }

      // Khá»Ÿi cháº¡y á»©ng dá»¥ng khi trang táº£i xong
      window.addEventListener('DOMContentLoaded', initApp);
    </script>
  </div>

  <!-- Popup Luyá»‡n viáº¿t (HanziWriter Modal) -->
  <div id="writing-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); z-index:1000;">
    <div style="background:white; width:350px; max-width:90%; margin:100px auto; padding:20px; border-radius:10px; text-align:center; position:relative;">
      <h3>Luyá»‡n viáº¿t</h3>
      <div id="writing-word" style="margin-top:10px; font-size:20px;"></div>
      <div id="character-target-div">
        <canvas id="grid-canvas" width="300" height="300"></canvas>
        <div class="grid-line vertical"></div>
        <div class="grid-line horizontal"></div>
        <div class="grid-line diagonal1"></div>
        <div class="grid-line diagonal2"></div>
        <!-- Container riÃªng cho HanziWriter -->
        <div id="writer-container"></div>
      </div>
      <button class="btn danger" onclick="closeWritingPopup()" style="margin-top:15px;">ÄÃ³ng</button>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/hanzi-writer@2.2.2/dist/hanzi-writer.min.js"></script>
  <script>
    let writerInstance = null;
    let writingChars = [];
    let writingIndex = 0;

    function openWritingPopup() {
      if (!currentWord || !currentWord[0]) {
        alert("KhÃ´ng cÃ³ chá»¯ HÃ¡n Ä‘á»ƒ luyá»‡n viáº¿t.");
        return;
      }
      writingChars = currentWord[0].split('');
      writingIndex = 0;
      document.getElementById("writing-modal").style.display = "block";
      drawGridLines();
      startWritingNextChar();
    }

    function closeWritingPopup() {
      document.getElementById("writing-modal").style.display = "none";
    }

    function startWritingNextChar() {
      if (writingIndex >= writingChars.length) {
        document.getElementById("writing-word").textContent = "âœ… ÄÃ£ luyá»‡n xong!";
        return;
      }
      const char = writingChars[writingIndex];
      document.getElementById("writing-word").textContent = `#${writingIndex + 1}: ${char}`;
      // XÃ³a ná»™i dung chá»‰ trong writer-container, giá»¯ nguyÃªn grid lines
      document.getElementById("writer-container").innerHTML = "";
      writerInstance = HanziWriter.create("writer-container", char, {
        width: 300,
        height: 300,
        padding: 5,
        showOutline: false,
        showCharacter: false,
        highlightOnComplete: true
      });
      writerInstance.quiz({
        onComplete: function() {
          setTimeout(() => {
            writingIndex++;
            startWritingNextChar();
          }, 600);
        }
      });
    }

    function drawGridLines() {
      const canvas = document.getElementById("grid-canvas");
      if (!canvas) return;
      const ctx = canvas.getContext("2d");
      ctx.clearRect(0, 0, 300, 300);
      ctx.strokeStyle = "rgba(0,0,0,0.08)";
      ctx.lineWidth = 1;
      
      // Váº½ Ä‘Æ°á»ng dá»c giá»¯a
      ctx.beginPath(); ctx.moveTo(150, 0); ctx.lineTo(150, 300); ctx.stroke();
      // Váº½ Ä‘Æ°á»ng ngang giá»¯a
      ctx.beginPath(); ctx.moveTo(0, 150); ctx.lineTo(300, 150); ctx.stroke();
      // Váº½ Ä‘Æ°á»ng chÃ©o /
      ctx.beginPath(); ctx.moveTo(300, 0); ctx.lineTo(0, 300); ctx.stroke();
      // Váº½ cÃ¡c Ä‘Æ°á»ng phá»¥
      ctx.beginPath(); ctx.moveTo(0, 75); ctx.lineTo(225, 300); ctx.stroke();
      ctx.beginPath(); ctx.moveTo(75, 0); ctx.lineTo(300, 225); ctx.stroke();
      ctx.beginPath(); ctx.moveTo(0, 225); ctx.lineTo(225, 0); ctx.stroke();
      ctx.beginPath(); ctx.moveTo(75, 300); ctx.lineTo(300, 75); ctx.stroke();
    }
  </script>

  <!-- Grammar Modal -->
  <div id="grammar-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:9999; pointer-events:auto;">
    <div style="background:white; max-width:90%; width:600px; margin:60px auto; padding:20px; border-radius:10px; position:relative;">
      <h3>ğŸ“˜ Ngá»¯ phÃ¡p cáº£m nháº­n (HSK1â€“6)</h3>
      <label for="grammarLevel">Chá»n cáº¥p Ä‘á»™:</label>
      <select id="grammarLevel" onchange="changeGrammarLevel()">
        <option value="HSK1">HSK1</option>
        <option value="HSK2">HSK2</option>
        <option value="HSK3">HSK3</option>
        <option value="HSK4">HSK4</option>
        <option value="HSK5">HSK5</option>
        <option value="HSK6">HSK6</option>
      </select>
      <p id="grammar-example" style="font-size:20px; margin-top:10px;"></p>
      <input id="grammar-answer" placeholder="Nháº­p cáº¥u trÃºc ngá»¯ phÃ¡p..." style="width:100%; padding:10px;" />
      <div style="margin-top:10px;">
        <button class="btn accent" onclick="checkGrammarAnswer()">Kiá»ƒm tra</button>
        <button class="btn secondary" onclick="nextGrammarExample()">VÃ­ dá»¥ khÃ¡c</button>
        <button class="btn secondary" onclick="nextGrammarStructure()">Cáº¥u trÃºc khÃ¡c</button>
        <button class="btn danger" onclick="document.getElementById('grammar-modal').style.display='none'">ÄÃ³ng</button>
      </div>
      <p id="grammar-feedback" style="margin-top:10px; font-weight:bold;"></p>
    </div>
  </div>

  <script>
    // Dá»¯ liá»‡u ngá»¯ phÃ¡p cho cÃ¡c cáº¥p Ä‘á»™ HSK
    const grammarData = {
  "HSK1": [
    {
      "structure": "ä¸ + TÃNH Tá»ª / Äá»˜NG Tá»ª",
      "meaning": "DÃ¹ng Ä‘á»ƒ phá»§ Ä‘á»‹nh hÃ nh Ä‘á»™ng hoáº·c tráº¡ng thÃ¡i.",
      "examples": [
        "æˆ‘ä¸å»ã€‚",
        "ä»–ä¸å¥½ã€‚"
      ]
    },
    {
      "structure": "CÃ‚U KHáº²NG Äá»ŠNH + å—ï¼Ÿ",
      "meaning": "CÃ¢u há»i Ä‘Æ¡n giáº£n báº±ng cÃ¡ch thÃªm å— vÃ o cuá»‘i cÃ¢u.",
      "examples": [
        "ä½ å¥½å—ï¼Ÿ",
        "ä½ æ˜¯è€å¸ˆå—ï¼Ÿ"
      ]
    },
    {
      "structure": "TÃNH Tá»ª + DANH Tá»ª",
      "meaning": "TÃ­nh tá»« Ä‘á»©ng trÆ°á»›c danh tá»« Ä‘á»ƒ miÃªu táº£.",
      "examples": [
        "ç™½é©¬ã€‚",
        "å¤§æˆ¿å­ã€‚"
      ]
    },
    {
      "structure": "Ráº¥t / QuÃ¡ / KhÃ´ng quÃ¡ + TÃNH Tá»ª",
      "meaning": "DÃ¹ng å¾ˆ / å¤ª / ä¸å¤ª Ä‘á»ƒ thá»ƒ hiá»‡n má»©c Ä‘á»™.",
      "examples": [
        "å¥¹å¾ˆå¥½ã€‚",
        "æ±‰è¯­ä¸å¤ªéš¾ã€‚"
      ]
    },
    {
      "structure": "Chá»§ ngá»¯ + å» + Ä‘á»‹a Ä‘iá»ƒm + Ä‘á»™ng tá»« + tÃ¢n ngá»¯",
      "meaning": "CÃ¢u Ä‘i Ä‘Ã¢u lÃ m gÃ¬.",
      "examples": [
        "å¼Ÿå¼Ÿå»æ²³å†…å¯„é’±ã€‚",
        "æˆ‘æ˜å¤©å»é“¶è¡Œå–é’±ã€‚"
      ]
    },
    {
      "structure": "Äá»ŠA ÄIá»‚M + è§",
      "meaning": "ChÃ o táº¡m biá»‡t, háº¹n gáº·p táº¡i Ä‘á»‹a Ä‘iá»ƒm/thá»i gian.",
      "examples": [
        "å­¦æ ¡è§ï¼",
        "æ˜å¤©è§ï¼"
      ]
    },
    {
      "structure": "åœ¨ + Äá»ŠA ÄIá»‚M",
      "meaning": "DÃ¹ng Ä‘á»ƒ há»i/diá»…n táº£ Ä‘ang á»Ÿ Ä‘Ã¢u.",
      "examples": [
        "ä½ åœ¨å“ªå„¿ï¼Ÿ",
        "å¥¹åœ¨å›¾ä¹¦é¦†ã€‚"
      ]
    },
    {
      "structure": "è¿™æ˜¯ + DANH Tá»ª",
      "meaning": "CÃ¢u giá»›i thiá»‡u â€“ ÄÃ¢y lÃ â€¦",
      "examples": [
        "è¿™æ˜¯æˆ‘çš„è€å¸ˆã€‚",
        "è¿™æ˜¯æˆ‘å¦ˆå¦ˆã€‚"
      ]
    },
    {
      "structure": "è¯· + Äá»˜NG Tá»ª",
      "meaning": "CÃ¢u má»i ai Ä‘Ã³ lÃ m gÃ¬.",
      "examples": [
        "è¯·åã€‚",
        "è¯·è¿›ã€‚"
      ]
    },
    {
      "structure": "æˆ‘å« + TÃŠN",
      "meaning": "CÃ¢u giá»›i thiá»‡u tÃªn.",
      "examples": [
        "æˆ‘å«ç‹é¾™ã€‚",
        "ä»–å«å°æ˜ã€‚"
      ]
    },
    {
      "structure": "ä½ æ˜¯å“ªå›½äººï¼Ÿ",
      "meaning": "CÃ¢u há»i quá»‘c tá»‹ch.",
      "examples": [
        "æˆ‘æ˜¯è¶Šå—äººã€‚",
        "ä½ æ˜¯ä¸­å›½äººå—ï¼Ÿ"
      ]
    },
    {
      "structure": "åƒ/å– + ä»€ä¹ˆï¼Ÿ",
      "meaning": "Há»i ai Ä‘Ã³ Äƒn/uá»‘ng gÃ¬.",
      "examples": [
        "ä½ åƒä»€ä¹ˆï¼Ÿ",
        "ä½ å–ä»€ä¹ˆï¼Ÿ"
      ]
    },
    {
      "structure": "LÆ°á»£ng tá»« + DANH Tá»ª",
      "meaning": "Há»i vÃ  tráº£ lá»i sá»‘ lÆ°á»£ng.",
      "examples": [
        "å‡ ä¸ªäººï¼Ÿ",
        "ä¸¤æœ¬ä¹¦ã€‚"
      ]
    },
    {
      "structure": "å¤šå°‘ + TIá»€N",
      "meaning": "Há»i giÃ¡ tiá»n.",
      "examples": [
        "è‹¹æœä¸€æ–¤å¤šå°‘é’±ï¼Ÿ",
        "è¿™ä¸ªå¤šå°‘ï¼Ÿ"
      ]
    },
    {
      "structure": "ç»™ + TÃ‚N NGá»®",
      "meaning": "Äá»™ng tá»« ç»™ â€“ cho ai cÃ¡i gÃ¬.",
      "examples": [
        "ç»™ä½ é’±ã€‚",
        "æˆ‘å¦ˆå¦ˆç»™æˆ‘é’±ã€‚"
      ]
    },
    {
      "structure": "ä½åœ¨å“ªå„¿ï¼Ÿ",
      "meaning": "Há»i nÆ¡i á»Ÿ.",
      "examples": [
        "ä»–ä½åœ¨å“ªå„¿ï¼Ÿ",
        "æˆ‘ä½è¯­è¨€å¤§å­¦ã€‚"
      ]
    },
    {
      "structure": "åœ¨ + Äá»ŠA ÄIá»‚M + Äá»˜NG Tá»ª",
      "meaning": "Biá»ƒu thá»‹ hÃ nh Ä‘á»™ng xáº£y ra á»Ÿ Ä‘Ã¢u.",
      "examples": [
        "å¥¹åœ¨å›¾ä¹¦é¦†çœ‹ä¹¦ã€‚",
        "æˆ‘åœ¨å®¶åšä½œä¸šã€‚"
      ]
    },
    {
      "structure": "CÃ¢u chÃ­nh pháº£n",
      "meaning": "Dáº¡ng cÃ¢u há»i phá»§ Ä‘á»‹nh â€“ kháº³ng Ä‘á»‹nh.",
      "examples": [
        "ä½ å»ä¸å»ï¼Ÿ",
        "ä»–åƒä¸åƒï¼Ÿ"
      ]
    },
    {
      "structure": "A è¿˜æ˜¯ Bï¼Ÿ",
      "meaning": "CÃ¢u há»i lá»±a chá»n.",
      "examples": [
        "ä½ åƒé¢åŒ…è¿˜æ˜¯ç±³é¥­ï¼Ÿ",
        "ä½ æ˜¯å­¦ç”Ÿè¿˜æ˜¯è€å¸ˆï¼Ÿ"
      ]
    },
    {
      "structure": "CÃ¢u vá»›i çš„",
      "meaning": "Cáº¥u trÃºc Ä‘á»‹nh ngá»¯: A çš„ B.",
      "examples": [
        "æˆ‘çš„ä¹¦ã€‚",
        "é»‘è‰²çš„è¡£æœã€‚"
      ]
    }
  ],
  "HSK2": [
    {
      "structure": "Tráº¡ng ngá»¯ chá»‰ thá»i gian",
      "meaning": "Chá»‰ thá»i gian diá»…n ra hÃ nh Ä‘á»™ng, Ä‘á»©ng trÆ°á»›c Ä‘á»™ng tá»« hoáº·c chá»§ ngá»¯.",
      "examples": [
        "æˆ‘æ¥ çš„æ—¶å€™è½¦å·²ç»èµ°äº†ã€‚",
        "æ˜å¹´æˆ‘æ‰“ç®—å»ä¸­å›½ç•™å­¦ã€‚"
      ]
    },
    {
      "structure": "è¿˜æ˜¯ / æˆ–è€…",
      "meaning": "Biá»ƒu thá»‹ sá»± lá»±a chá»n â€“ 'è¿˜æ˜¯' dÃ¹ng trong cÃ¢u há»i, 'æˆ–è€…' dÃ¹ng trong cÃ¢u tráº§n thuáº­t.",
      "examples": [
        "ä½ å–œæ¬¢è‹¹æœè¿˜æ˜¯æ¢¨ï¼Ÿ",
        "æˆ‘æƒ³å½“æ•™å¸ˆæˆ–è€…ç¿»è¯‘ã€‚"
      ]
    },
    {
      "structure": "æ­£åœ¨ / åœ¨ / æ­£ + Äá»™ng tá»«",
      "meaning": "Biá»ƒu thá»‹ hÃ nh Ä‘á»™ng Ä‘ang diá»…n ra.",
      "examples": [
        "æˆ‘åœ¨å¬éŸ³ä¹å‘¢ã€‚",
        "ä»–æ­£åœ¨çœ‹ç”µè§†ã€‚"
      ]
    },
    {
      "structure": "CÃ¢u cÃ³ hai tÃ¢n ngá»¯",
      "meaning": "Má»™t sá»‘ Ä‘á»™ng tá»« cÃ³ 2 tÃ¢n ngá»¯ â€“ ngÆ°á»i vÃ  váº­t.",
      "examples": [
        "æ˜¨å¤©å°èŠ±å‘Šè¯‰æˆ‘è¿™ä»¶äº‹äº†ã€‚",
        "æˆ‘é€ä½ ä¸€æœ¬ä¹¦ã€‚"
      ]
    },
    {
      "structure": "æ€ä¹ˆ + Äá»™ng tá»«",
      "meaning": "DÃ¹ng Ä‘á»ƒ há»i cÃ¡ch lÃ m viá»‡c gÃ¬ Ä‘Ã³.",
      "examples": [
        "è¿™ä¸ªæ±‰å­—æ€ä¹ˆè¯»ï¼Ÿ",
        "ä½ æ€ä¹ˆçŸ¥é“ï¼Ÿ"
      ]
    },
    {
      "structure": "CÃ¢u liÃªn Ä‘á»™ng",
      "meaning": "Sá»­ dá»¥ng nhiá»u Ä‘á»™ng tá»« Ä‘á»ƒ nÃ³i rÃµ hÃ nh Ä‘á»™ng Ä‘i Ä‘Ã¢u lÃ m gÃ¬.",
      "examples": [
        "æˆ‘å»è¶…å¸‚ä¹°è‹¹æœã€‚",
        "ä»–åœ¨å‡é¾™ä¸­å¿ƒå­¦ä¹ æ±‰è¯­ã€‚"
      ]
    },
    {
      "structure": "å¤ª + TÃ­nh tá»« + äº†",
      "meaning": "Diá»…n táº£ má»©c Ä‘á»™ cao, ngáº¡c nhiÃªn hoáº·c khÃ´ng hÃ i lÃ²ng.",
      "examples": [
        "å¤ªå¥½äº†ï¼",
        "å¤ªè´µäº†ï¼"
      ]
    },
    {
      "structure": "Äá»™ng tá»« trÃ¹ng láº·p",
      "meaning": "Biá»ƒu thá»‹ hÃ nh Ä‘á»™ng ngáº¯n gá»n, thá»­ lÃ m.",
      "examples": [
        "è¯•ä¸€è¯•ã€‚",
        "çœ‹çœ‹è¿™æœ¬ä¹¦ã€‚"
      ]
    },
    {
      "structure": "åˆâ€¦åˆâ€¦ / ä¸€è¾¹â€¦ä¸€è¾¹â€¦",
      "meaning": "Biá»ƒu thá»‹ hai hÃ nh Ä‘á»™ng Ä‘á»“ng thá»i.",
      "examples": [
        "å¥¹åˆæ¼‚äº®åˆèªæ˜ã€‚",
        "æˆ‘ä¸€è¾¹åšé¥­ä¸€è¾¹çœ‹ç”µè§†ã€‚"
      ]
    },
    {
      "structure": "ä¸€ç‚¹å„¿ / æœ‰ä¸€ç‚¹å„¿",
      "meaning": "Diá»…n táº£ má»©c Ä‘á»™ Ã­t hoáº·c má»™t chÃºt.",
      "examples": [
        "æœ‰ç‚¹å„¿å†·ã€‚",
        "ç»™æˆ‘ä¸€ç‚¹å„¿å’–å•¡ã€‚"
      ]
    },
    {
      "structure": "ä»¥å‰ / ä»¥å",
      "meaning": "Biá»ƒu thá»‹ má»‘c thá»i gian â€“ trÆ°á»›c hoáº·c sau.",
      "examples": [
        "æ¥ä¸­å›½ä»¥å‰æˆ‘æ˜¯å­¦ç”Ÿã€‚",
        "ä¸€ä¸ªæ˜ŸæœŸä»¥åæˆ‘å›æ¥ã€‚"
      ]
    },
    {
      "structure": "å¯¹ + danh tá»«",
      "meaning": "DÃ¹ng lÃ m tráº¡ng ngá»¯ biá»ƒu thá»‹ Ä‘á»‘i tÆ°á»£ng cá»§a hÃ nh Ä‘á»™ng.",
      "examples": [
        "æˆ‘å¯¹éŸ³ä¹æ„Ÿå…´è¶£ã€‚",
        "ä»–å¯¹è¿™ä»¶äº‹ä¸æ„Ÿå…´è¶£ã€‚"
      ]
    },
    {
      "structure": "CÃ¢u kiÃªm ngá»¯",
      "meaning": "CÃ¢u cÃ³ hai Ä‘á»™ng tá»« vÃ  má»™t chá»§ ngá»¯ bá»‹ chi phá»‘i.",
      "examples": [
        "è€å¸ˆå«æˆ‘ä»¬è¯»è¯¾æ–‡ã€‚",
        "æˆ‘è¯·ä½ ä»¬ä»‹ç»ä¸€ä¸‹ã€‚"
      ]
    },
    {
      "structure": "PhÆ°Æ¡ng vá»‹ tá»«",
      "meaning": "Chá»‰ vá»‹ trÃ­ â€“ phÃ­a trÃªn, dÆ°á»›i, trong, ngoÃ i, trÃ¡i, pháº£iâ€¦",
      "examples": [
        "ä»–åœ¨å±‹å­é‡Œã€‚",
        "ä¹¦åœ¨æ¡Œå­ä¸Šã€‚"
      ]
    },
    {
      "structure": "Biá»ƒu Ä‘áº¡t sá»± tá»“n táº¡i vá»›i æœ‰ / åœ¨",
      "meaning": "CÃ³ cÃ¡i gÃ¬ / Ai á»Ÿ Ä‘Ã¢u.",
      "examples": [
        "é—¨å‰æœ‰å¾ˆå¤šè‡ªè¡Œè½¦ã€‚",
        "ç›ä¸½åœ¨æ•™å®¤é‡Œã€‚"
      ]
    },
    {
      "structure": "Giá»›i tá»« ç¦» / ä» / å¾€",
      "meaning": "Chá»‰ khoáº£ng cÃ¡ch, Ä‘iá»ƒm xuáº¥t phÃ¡t, phÆ°Æ¡ng hÆ°á»›ng.",
      "examples": [
        "æˆ‘å®¶ç¦»è¶…å¸‚ä¸¤å…¬é‡Œã€‚",
        "ä»–ä»åŒ—äº¬æ¥ã€‚"
      ]
    },
    {
      "structure": "Äá»™ng tá»« nÄƒng nguyá»‡n",
      "meaning": "Muá»‘n, biáº¿t, cÃ³ thá»ƒ lÃ m gÃ¬ Ä‘Ã³.",
      "examples": [
        "æˆ‘ä¼šè¯´æ±‰è¯­ã€‚",
        "ä»–æƒ³ä¹°è¯å…¸ã€‚"
      ]
    },
    {
      "structure": "CÃ¢u há»i vá»›i æ€ä¹ˆ",
      "meaning": "Há»i lÃ½ do, nguyÃªn nhÃ¢n.",
      "examples": [
        "ä½ æ€ä¹ˆæ²¡æ¥ï¼Ÿ",
        "ä»–æ€ä¹ˆä¸å–é…’ï¼Ÿ"
      ]
    },
    {
      "structure": "Bá»• ngá»¯ tráº¡ng thÃ¡i å¾—",
      "meaning": "MiÃªu táº£ trÃ¬nh Ä‘á»™, tráº¡ng thÃ¡i hÃ nh Ä‘á»™ng.",
      "examples": [
        "å¥¹å­¦å¾—å¾ˆå¥½ã€‚",
        "æˆ‘å”±æ­Œå”±å¾—ä¸å¥½ã€‚"
      ]
    },
    {
      "structure": "Trá»£ tá»« ngá»¯ khÃ­ å§",
      "meaning": "Biá»ƒu thá»‹ phÃ¡n Ä‘oÃ¡n, Ä‘á» nghá»‹, cáº§u khiáº¿n.",
      "examples": [
        "ä½ ç»™æˆ‘æ‰“ç”µè¯å§ï¼Ÿ",
        "æˆ‘ä»¬èµ°å§ã€‚"
      ]
    },
    {
      "structure": "ä¸æ˜¯â€¦å—ï¼Ÿ",
      "meaning": "CÃ¢u pháº£n váº¥n â€“ nháº¥n máº¡nh Ä‘iá»u Ä‘Ã£ biáº¿t.",
      "examples": [
        "ä½ ä¸æ˜¯å­¦ç”Ÿå—ï¼Ÿ",
        "ä»–ä¸æ˜¯è¯´è¿‡äº†å—ï¼Ÿ"
      ]
    },
    {
      "structure": "æ˜¯â€¦ä¸æ˜¯â€¦",
      "meaning": "CÃ¢u há»i chÃ­nh pháº£n.",
      "examples": [
        "ä½ æ˜¯ä¸æ˜¯æƒ³å®¶äº†ï¼Ÿ",
        "ä»–æ˜¯ä¸æ˜¯è€å¸ˆï¼Ÿ"
      ]
    },
    {
      "structure": "Trá»£ tá»« äº†",
      "meaning": "Biá»ƒu thá»‹ hÃ nh Ä‘á»™ng Ä‘Ã£ xáº£y ra hoáº·c thay Ä‘á»•i.",
      "examples": [
        "æˆ‘åƒé¥­äº†ã€‚",
        "ä»–èµ°äº†æ²¡æœ‰ï¼Ÿ"
      ]
    },
    {
      "structure": "å† / åˆ",
      "meaning": "å†: sáº½ lÃ m láº¡i; åˆ: Ä‘Ã£ lÃ m láº¡i.",
      "examples": [
        "æˆ‘æ˜å¤©å†å»ã€‚",
        "ä»–åˆå–é…’äº†ã€‚"
      ]
    },
    {
      "structure": "æ€ä¹ˆäº†?",
      "meaning": "Há»i tÃ¬nh huá»‘ng xáº£y ra.",
      "examples": [
        "ä½ æ€ä¹ˆäº†ï¼Ÿ",
        "æˆ‘æ„Ÿå†’äº†ã€‚"
      ]
    },
    {
      "structure": "åˆ«â€¦äº†",
      "meaning": "Biá»ƒu thá»‹ khuyÃªn can, ngÄƒn cáº£n.",
      "examples": [
        "åˆ«è¯´è¯äº†ã€‚",
        "åˆ«å“­äº†ã€‚"
      ]
    },
    {
      "structure": "å› ä¸ºâ€¦æ‰€ä»¥â€¦",
      "meaning": "Chá»‰ nguyÃªn nhÃ¢n â€“ káº¿t quáº£.",
      "examples": [
        "å› ä¸ºä¸‹é›¨ï¼Œæ‰€ä»¥æˆ‘æ²¡å»ã€‚",
        "æˆ‘å› ä¸ºç—…äº†ï¼Œæ‰€ä»¥æ²¡ä¸Šè¯¾ã€‚"
      ]
    },
    {
      "structure": "è¦æ˜¯â€¦å°±â€¦",
      "meaning": "CÃ¢u Ä‘iá»u kiá»‡n náº¿uâ€¦ thÃ¬â€¦",
      "examples": [
        "è¦æ˜¯ä½ æ¥ï¼Œæˆ‘å°±æ¥ã€‚",
        "è¦æ˜¯æ˜å¤©æ™´å¤©ï¼Œå°±å‡ºå»ç©ã€‚"
      ]
    },
    {
      "structure": "è™½ç„¶â€¦ä½†æ˜¯â€¦",
      "meaning": "Tuyâ€¦ nhÆ°ngâ€¦",
      "examples": [
        "è™½ç„¶å¾ˆå†·ï¼Œä½†æ˜¯æˆ‘æ¥äº†ã€‚",
        "è™½ç„¶ä»–ç—…äº†ï¼Œä½†æ˜¯ä»–å»ä¸Šè¯¾äº†ã€‚"
      ]
    }
  ],
  "HSK3": [
    {
      "structure": "Äá»™ng tá»« + å®Œ / æ‡‚ / è§ / å¼€ / ä¸Š / åˆ° / æˆ",
      "meaning": "Biá»ƒu thá»‹ káº¿t quáº£ cá»§a hÃ nh Ä‘á»™ng nhÆ° hoÃ n thÃ nh, hiá»ƒu Ä‘Æ°á»£c, nhÃ¬n tháº¥y, má»Ÿ ra...",
      "examples": [
        "ä»–å†™å®Œæ±‰å­—äº†ã€‚",
        "æˆ‘å¬æ‡‚ä½ çš„è¯äº†ã€‚"
      ]
    },
    {
      "structure": "Sá»­ dá»¥ng lÆ°á»£ng tá»« thá»i gian",
      "meaning": "Biá»ƒu thá»‹ thá»i lÆ°á»£ng cá»§a hÃ nh Ä‘á»™ng diá»…n ra trong bao lÃ¢u.",
      "examples": [
        "ä»–æ¸¸æ³³æ¸¸äº†ä¸€ä¸ªä¸‹åˆã€‚",
        "æˆ‘æ¯å¤©éƒ½åšæŒé”»ç‚¼ä¸€ä¸ªå°æ—¶ã€‚"
      ]
    },
    {
      "structure": "So sÃ¡nh vá»›i æ¯”",
      "meaning": "DÃ¹ng æ¯” Ä‘á»ƒ so sÃ¡nh hai sá»± váº­t vá» tÃ­nh cháº¥t hoáº·c hÃ nh Ä‘á»™ng.",
      "examples": [
        "ä»–è·‘å¾—æ¯”æˆ‘å¿«å¾—å¤šã€‚",
        "è¿™ä»¶æ¯”é‚£ä»¶è´µå¤šäº†ã€‚"
      ]
    },
    {
      "structure": "Cáº¥u trÃºc A è·Ÿ B ä¸€æ · / ä¸ä¸€æ ·",
      "meaning": "Biá»ƒu thá»‹ sá»± giá»‘ng hoáº·c khÃ¡c nhau giá»¯a hai Ä‘á»‘i tÆ°á»£ng.",
      "examples": [
        "è¿™ä»¶è¡£æœè·Ÿé‚£ä»¶è¡£æœä»·é’±ä¸ä¸€æ ·ã€‚",
        "æˆ‘ä¹°äº†ä¸€æœ¬è·Ÿä½ ä¸€æ ·çš„è¯å…¸ã€‚"
      ]
    },
    {
      "structure": "ä¸ä½†â€¦è€Œä¸”â€¦",
      "meaning": "KhÃ´ng nhá»¯ngâ€¦ mÃ  cÃ²nâ€¦, thá»ƒ hiá»‡n má»©c Ä‘á»™ tÄƒng tiáº¿n hoáº·c bá»• sung.",
      "examples": [
        "æˆ‘ä¸ä½†å»è¿‡åŒ—äº¬ï¼Œè€Œä¸”å»è¿‡ä¸Šæµ·ã€‚",
        "å¥¹ä¸ä½†ä¼šå”±æ­Œï¼Œè€Œä¸”ä¼šå¼¹é’¢ç´ã€‚"
      ]
    },
    {
      "structure": "äº† vÃ  ä¸â€¦äº†",
      "meaning": "Trá»£ tá»« äº† biá»ƒu thá»‹ sá»± thay Ä‘á»•i, khÃ´ngâ€¦ ná»¯a Ä‘á»ƒ phá»§ Ä‘á»‹nh sá»± tiáº¿p diá»…n.",
      "examples": [
        "æˆ‘ä»Šå¤©ä¸å‘çƒ§äº†ã€‚",
        "è¿™ä»¶è¡£æœå°äº†ã€‚"
      ]
    },
    {
      "structure": "Bá»• ngá»¯ xu hÆ°á»›ng",
      "meaning": "Diá»…n táº£ phÆ°Æ¡ng hÆ°á»›ng cá»§a hÃ nh Ä‘á»™ng thÃ´ng qua æ¥ / å».",
      "examples": [
        "å¥¹èµ°å‡ºå­¦æ ¡å»äº†ã€‚",
        "æˆ‘ä¹°å›æ¥ä¸€æœ¬ä¹¦ã€‚"
      ]
    },
    {
      "structure": "Äá»™ng tá»« + è¿‡",
      "meaning": "Biá»ƒu thá»‹ kinh nghiá»‡m Ä‘Ã£ tá»«ng lÃ m gÃ¬ trong quÃ¡ khá»©.",
      "examples": [
        "æˆ‘æ²¡åƒè¿‡åŒ—äº¬çƒ¤é¸­ã€‚",
        "ä»–å»è¿‡ä¸¤æ¬¡ä¸­å›½ã€‚"
      ]
    },
    {
      "structure": "Bá»• ngá»¯ Ä‘á»™ng lÆ°á»£ng",
      "meaning": "Chá»‰ sá»‘ láº§n phÃ¡t sinh hÃ nh Ä‘á»™ng.",
      "examples": [
        "æˆ‘è¯»äº†ä¸¤æ¬¡æ±‰è¯­è¯¾æ–‡ã€‚",
        "ä»–æ‰¾è¿‡ç›ä¸½ä¸€æ¬¡ã€‚"
      ]
    },
    {
      "structure": "Cáº¥u trÃºc æ˜¯â€¦çš„",
      "meaning": "Nháº¥n máº¡nh thá»i gian, Ä‘á»‹a Ä‘iá»ƒm, phÆ°Æ¡ng thá»©c cá»§a hÃ nh Ä‘á»™ng Ä‘Ã£ xáº£y ra.",
      "examples": [
        "æˆ‘æ˜¯å»å¹´ä¹æœˆæ¥ä¸­å›½çš„ã€‚",
        "æˆ‘ä»¬æ˜¯åé£æœºæ¥çš„ã€‚"
      ]
    },
    {
      "structure": "CÃ¢u ä¸€â€¦å°±â€¦",
      "meaning": "Biá»ƒu thá»‹ hai hÃ nh Ä‘á»™ng xáº£y ra liÃªn tiáº¿p.",
      "examples": [
        "æˆ‘ä¸€ä¸‹è¯¾å°±å›å®¿èˆã€‚",
        "ä»–ä¸€å–é…’å°±è„¸çº¢ã€‚"
      ]
    },
    {
      "structure": "CÃ¢u vá»‹ ngá»¯ chá»§ vá»‹",
      "meaning": "MiÃªu táº£ Ä‘á»‘i tÆ°á»£ng báº±ng cá»¥m chá»§ vá»‹ lÃ m vá»‹ ngá»¯.",
      "examples": [
        "å¥¹è®²çš„æˆ‘æ²¡æœ‰éƒ½å¬æ‡‚ã€‚",
        "æˆ‘çš„æŠ¤ç…§ä½ æ‰¾åˆ°äº†æ²¡æœ‰ï¼Ÿ"
      ]
    },
    {
      "structure": "Bá»• ngá»¯ káº¿t quáº£ åœ¨ / ç€ / å¥½ / æˆ",
      "meaning": "Biá»ƒu thá»‹ káº¿t quáº£ hoáº·c tráº¡ng thÃ¡i Ä‘áº¡t Ä‘Æ°á»£c cá»§a hÃ nh Ä‘á»™ng.",
      "examples": [
        "æˆ‘æŠŠç”»æŒ‚åœ¨å¢™ä¸Šäº†ã€‚",
        "æˆ‘ä¸€å®šè¦å­¦å¥½æ±‰è¯­ã€‚"
      ]
    },
    {
      "structure": "CÃ¢u bá»‹ Ä‘á»™ng vá»›i è¢« / è®© / å«",
      "meaning": "Diá»…n táº£ sá»± viá»‡c xáº£y ra do hÃ nh Ä‘á»™ng cá»§a ngÆ°á»i khÃ¡c gÃ¢y ra.",
      "examples": [
        "ä»–çš„è½¦è¢«å·äº†ã€‚",
        "å½•éŸ³æœºå«çˆ¸çˆ¸å…³ä¸Šäº†ã€‚"
      ]
    },
    {
      "structure": "Bá»‹ Ä‘á»™ng dÃ¹ng ç»™ / æ‰€",
      "meaning": "Cáº¥u trÃºc bá»‹ Ä‘á»™ng nÃ¢ng cao dÃ¹ng trong vÄƒn viáº¿t hoáº·c trang trá»ng.",
      "examples": [
        "æ•™å®¤éƒ½è®©æˆ‘ä»¬ç»™æ‰“æ‰«å¹²å‡€äº†ã€‚",
        "å¤§å®¶éƒ½ä¸ºä»–æ‰€æ„ŸåŠ¨ã€‚"
      ]
    }
  ],
  "HSK4": [
    {
      "structure": "Bá»• ngá»¯ xu hÆ°á»›ng phá»©c há»£p",
      "meaning": "Biá»ƒu thá»‹ phÆ°Æ¡ng hÆ°á»›ng Ä‘á»™ng tÃ¡c thÃ´ng qua cÃ¡c tá»• há»£p Ä‘á»™ng tá»« + æ¥/å».",
      "examples": [
        "ä»–è·‘å›å®¶æ¥äº†ã€‚",
        "çˆ¸çˆ¸ä»ç®±å­é‡Œæ‹¿å‡ºæ¥ä¸€æ¡é¡¹é“¾ã€‚"
      ]
    },
    {
      "structure": "CÃ¢u tá»“n táº¡i",
      "meaning": "DÃ¹ng Ä‘á»ƒ miÃªu táº£ sá»± tá»“n táº¡i vÃ  xuáº¥t hiá»‡n cá»§a ngÆ°á»i/sá»± váº­t táº¡i má»™t nÆ¡i nÃ o Ä‘Ã³.",
      "examples": [
        "æ ‘ä¸Šå¼€ç€å¾ˆå¤šèŠ±ã€‚",
        "é—¨å‰ç§ç€ä¸€æ£µæ ‘ã€‚"
      ]
    },
    {
      "structure": "è¶Šæ¥è¶Šâ€¦ / è¶Šâ€¦è¶Šâ€¦",
      "meaning": "Biá»ƒu thá»‹ má»©c Ä‘á»™ thay Ä‘á»•i theo thá»i gian hoáº·c theo tÃ¬nh hÃ¬nh.",
      "examples": [
        "æˆ‘ä»¬çš„æ±‰è¯­è¶Šæ¥è¶Šå¥½ã€‚",
        "ä»–è¶Šåƒè¶Šå–œæ¬¢åƒã€‚"
      ]
    },
    {
      "structure": "CÃ¢u chá»¯ æŠŠ",
      "meaning": "Nháº¥n máº¡nh viá»‡c xá»­ lÃ½ má»™t Ä‘á»‘i tÆ°á»£ng, tÃ¢n ngá»¯ Ä‘áº·t trÆ°á»›c Ä‘á»™ng tá»«.",
      "examples": [
        "æˆ‘æŠŠä½œä¸šäº¤ç»™è€å¸ˆäº†ã€‚",
        "å¥¹æŠŠé—¨å’Œçª—æˆ·éƒ½æ“¦å¾—å¹²å¹²å‡€å‡€çš„ã€‚"
      ]
    },
    {
      "structure": "CÃ¢u chá»¯ è¢«",
      "meaning": "Biá»ƒu thá»‹ Ã½ nghÄ©a bá»‹ Ä‘á»™ng, ngÆ°á»i/sá»± váº­t lÃ  Ä‘á»‘i tÆ°á»£ng bá»‹ tÃ¡c Ä‘á»™ng.",
      "examples": [
        "æˆ‘çš„é’±åŒ…è¢«å·äº†ã€‚",
        "ä»–è¢«æ’ä¼¤äº†ã€‚"
      ]
    },
    {
      "structure": "CÃ¢u phá»©c khÃ´ng dÃ¹ng tá»« liÃªn káº¿t",
      "meaning": "Thá»ƒ hiá»‡n quan há»‡ logic giá»¯a cÃ¡c váº¿ cÃ¢u báº±ng ngá»¯ nghÄ©a, khÃ´ng dÃ¹ng tá»« ná»‘i.",
      "examples": [
        "ä½ å»æˆ‘å°±å»ã€‚",
        "ä¸‹é›¨å°±ä¸å»äº†ã€‚"
      ]
    },
    {
      "structure": "Bá»• ngá»¯ kháº£ nÄƒng",
      "meaning": "Diá»…n táº£ Ä‘iá»u kiá»‡n khÃ¡ch quan/chá»§ quan cho hÃ nh Ä‘á»™ng cÃ³ thá»ƒ xáº£y ra hay khÃ´ng.",
      "examples": [
        "æˆ‘å¬å¾—æ‡‚è€å¸ˆçš„è¯ã€‚",
        "æˆ‘å¤ªç´¯äº†ï¼Œè·‘ä¸åŠ¨äº†ã€‚"
      ]
    },
    {
      "structure": "Bá»• ngá»¯ tráº¡ng thÃ¡i",
      "meaning": "Diá»…n táº£ tráº¡ng thÃ¡i káº¿t quáº£ cá»§a hÃ nh Ä‘á»™ng Ä‘Ã£ xáº£y ra.",
      "examples": [
        "ä»–æ°”å¾—å¤§å«èµ·æ¥ã€‚",
        "ä»–çœ‹çƒèµ›çœ‹å¾—å¿˜äº†åƒé¥­ã€‚"
      ]
    },
    {
      "structure": "CÃ¢u liÃªn káº¿t åªè¦â€¦å°±â€¦",
      "meaning": "Chá»‰ cáº§nâ€¦ thÃ¬â€¦",
      "examples": [
        "åªè¦åŠªåŠ›ï¼Œå°±ä¸€å®šä¼šæˆåŠŸã€‚",
        "åªè¦ä½ æ¥ï¼Œæˆ‘å°±é«˜å…´ã€‚"
      ]
    },
    {
      "structure": "Bá»• ngá»¯ xu hÆ°á»›ng má»Ÿ rá»™ng",
      "meaning": "DÃ¹ng cÃ¡c tá»« nhÆ° èµ·æ¥ã€å‡ºæ¥ã€ä¸‹å»ã€ä¸‹æ¥ Ä‘á»ƒ biá»ƒu thá»‹ sá»± phÃ¡t sinh/tiáº¿p diá»…n/hÃ nh Ä‘á»™ng hoÃ n thÃ nh.",
      "examples": [
        "å¤§å®¶éƒ½ç¬‘èµ·æ¥äº†ã€‚",
        "ä½ æŠŠå¥å­å†™ä¸‹æ¥å§ã€‚"
      ]
    },
    {
      "structure": "So sÃ¡nh æƒ³èµ·æ¥ vá»›i æƒ³å‡ºæ¥",
      "meaning": "æƒ³èµ·æ¥ = nhá»› láº¡i; æƒ³å‡ºæ¥ = nghÄ© ra (Ã½ tÆ°á»Ÿng má»›i).",
      "examples": [
        "æˆ‘æƒ³èµ·æ¥äº†è¿™ä¸ªåœ°æ–¹ã€‚",
        "æˆ‘æƒ³ä¸å‡ºåŠæ³•æ¥ã€‚"
      ]
    },
    {
      "structure": "CÃ¢u liÃªn káº¿t åªæœ‰â€¦æ‰â€¦",
      "meaning": "Chá»‰ cÃ³â€¦ má»›iâ€¦",
      "examples": [
        "åªæœ‰åŠªåŠ›ï¼Œæ‰ä¼šæˆåŠŸã€‚",
        "åªæœ‰ä½ å»ï¼Œæ‰èƒ½æŠŠä»–å«æ¥ã€‚"
      ]
    },
    {
      "structure": "Äáº¡i tá»« nghi váº¥n dÃ¹ng phiáº¿m chá»‰",
      "meaning": "Äáº¡i tá»« nghi váº¥n khÃ´ng dÃ¹ng Ä‘á»ƒ há»i mÃ  Ä‘á»ƒ chá»‰ chung, chá»‰ riÃªng hoáº·c trá»‘ng khÃ´ng.",
      "examples": [
        "è°éƒ½å–œæ¬¢å¥¹ã€‚",
        "æˆ‘å¥½åƒåœ¨å“ªå„¿è§è¿‡è¿™ä¸ªäººã€‚"
      ]
    },
    {
      "structure": "PhÃ³ tá»« liÃªn káº¿t ä¸€è¾¹â€¦ä¸€è¾¹â€¦",
      "meaning": "DÃ¹ng Ä‘á»ƒ mÃ´ táº£ hai hÃ nh Ä‘á»™ng xáº£y ra Ä‘á»“ng thá»i.",
      "examples": [
        "ä»–ä¸€è¾¹å†™å­—ä¸€è¾¹å¬éŸ³ä¹ã€‚",
        "å¥¹ä¸€è¾¹è¯´ä¸€è¾¹ç¬‘ã€‚"
      ]
    },
    {
      "structure": "Cáº¥u trÃºc é™¤äº†â€¦ä»¥å¤–ï¼Œéƒ½/è¿˜â€¦",
      "meaning": "DÃ¹ng Ä‘á»ƒ loáº¡i trá»« hoáº·c bá»• sung thÃªm ngoÃ i cÃ¡i Ä‘Ã£ nÃ³i.",
      "examples": [
        "é™¤äº†ä»–ä»¥å¤–ï¼Œå¤§å®¶éƒ½æ¥äº†ã€‚",
        "é™¤äº†åŒ—äº¬ï¼Œæˆ‘ä»¬è¿˜å»äº†ä¸Šæµ·ã€‚"
      ]
    },
    {
      "structure": "Cáº¥u trÃºc å…ˆâ€¦å†â€¦ç„¶åâ€¦æœ€åâ€¦",
      "meaning": "Diá»…n táº£ trÃ¬nh tá»± cÃ¡c hÃ nh Ä‘á»™ng.",
      "examples": [
        "æˆ‘å…ˆåƒé¥­ï¼Œå†æ´—ç¢—ï¼Œç„¶åå­¦ä¹ ï¼Œæœ€åç¡è§‰ã€‚",
        "ä»–å…ˆå»è¥¿å®‰ï¼Œå†å»åŒ—äº¬ï¼Œç„¶åå»é¦™æ¸¯ã€‚"
      ]
    },
    {
      "structure": "CÃ¢u pháº£n váº¥n nháº¥n máº¡nh",
      "meaning": "DÃ¹ng Ä‘á»ƒ nháº¥n máº¡nh kháº³ng Ä‘á»‹nh hoáº·c phá»§ Ä‘á»‹nh Ä‘iá»u hiá»ƒn nhiÃªn.",
      "examples": [
        "ä½ ä¸æ˜¯ä¸­å›½äººå—ï¼Ÿ",
        "ä½ æ²¡çœ‹è§æˆ‘åœ¨è¿™å„¿å—ï¼Ÿ"
      ]
    },
    {
      "structure": "è¿â€¦ä¹Ÿ/éƒ½â€¦",
      "meaning": "Biá»ƒu thá»‹ nháº¥n máº¡nh, ngay cáº£â€¦ cÅ©ngâ€¦",
      "examples": [
        "ä»–è¿é¥­ä¹Ÿæ²¡åƒã€‚",
        "ä½ è¿è¿™ä¹ˆç®€å•çš„é¢˜ä¹Ÿä¸ä¼šã€‚"
      ]
    },
    {
      "structure": "Hai láº§n phá»§ Ä‘á»‹nh",
      "meaning": "DÃ¹ng hai phá»§ Ä‘á»‹nh Ä‘á»ƒ nháº¥n máº¡nh kháº³ng Ä‘á»‹nh.",
      "examples": [
        "æˆ‘æ²¡ä¸çŸ¥é“è¿™ä»¶äº‹ã€‚",
        "ä½ ä¸èƒ½ä¸å»ã€‚"
      ]
    }
  ]
};

    let gLevel = "HSK1", gIndex = 0, gExample = 0;

    function openGrammarGame() {
      document.getElementById("grammar-modal").style.display = "block";
      gLevel = "HSK1"; gIndex = 0; gExample = 0;
      updateGrammarExample();
    }
    function changeGrammarLevel() {
      gLevel = document.getElementById("grammarLevel").value;
      gIndex = 0; gExample = 0;
      updateGrammarExample();
    }
    function updateGrammarExample() {
      const item = grammarData[gLevel][gIndex];
      document.getElementById("grammar-example").textContent = item.examples[gExample];
      document.getElementById("grammar-feedback").textContent = "";
      document.getElementById("grammar-answer").value = "";
    }
    // HÃ m check Ä‘Ã¡p Ã¡n Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t Ä‘á»ƒ bá» qua dáº¥u "..." (hoáº·c "â€¦")
    function checkGrammarAnswer() {
      const user = document.getElementById("grammar-answer").value.trim();
      const correct = grammarData[gLevel][gIndex].structure;
      const mean = grammarData[gLevel][gIndex].meaning;
      const feedback = document.getElementById("grammar-feedback");
      // Loáº¡i bá» dáº¥u "..." vÃ  "â€¦" trong cáº£ Ä‘Ã¡p Ã¡n cá»§a ngÆ°á»i dÃ¹ng vÃ  Ä‘Ã¡p Ã¡n Ä‘Ãºng
      const normalizedUser = user.replace(/(\.{3}|â€¦)/g, "");
      const normalizedCorrect = correct.replace(/(\.{3}|â€¦)/g, "");
      if (normalizedUser === normalizedCorrect) {
        feedback.textContent = "âœ… ChÃ­nh xÃ¡c! " + correct + " = " + mean;
        feedback.style.color = "green";
      } else {
        feedback.textContent = "âŒ Sai. ÄÃ¡p Ã¡n Ä‘Ãºng: " + correct + " = " + mean;
        feedback.style.color = "red";
      }
    }
    function nextGrammarExample() {
      const item = grammarData[gLevel][gIndex];
      gExample = (gExample + 1) % item.examples.length;
      updateGrammarExample();
    }
    function nextGrammarStructure() {
      const total = grammarData[gLevel].length;
      gIndex = (gIndex + 1) % total;
      gExample = 0;
      updateGrammarExample();
    }
  </script>
</body>
</html>
